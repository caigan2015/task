{"version":3,"file":"js/live_center.bundle.js","sources":["webpack:///webpack/bootstrap 7f83f4b6f9def9d6b463","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/_art-template@4.12.2@art-template/lib/runtime.js","webpack:///./node_modules/_art-template@4.12.2@art-template/lib/compile/runtime.js","webpack:///./node_modules/_detect-node@2.0.3@detect-node/index.js","webpack:///app/js/live_center.js","webpack:///./app/template/live_center.art"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7f83f4b6f9def9d6b463","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 0\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15","'use strict';\n\nmodule.exports = require('./compile/runtime');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_art-template@4.12.2@art-template/lib/runtime.js\n// module id = 1\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15","'use strict';\n\n/*! art-template@runtime | https://github.com/aui/art-template */\n\nvar detectNode = require('detect-node');\nvar runtime = Object.create(detectNode ? global : window);\nvar ESCAPE_REG = /[\"&'<>]/;\n\n/**\n * 编码模板输出的内容\n * @param  {any}        content\n * @return {string}\n */\nruntime.$escape = function (content) {\n    return xmlEscape(toString(content));\n};\n\n/**\n * 迭代器，支持数组与对象\n * @param {array|Object} data \n * @param {function}     callback \n */\nruntime.$each = function (data, callback) {\n    if (Array.isArray(data)) {\n        for (var i = 0, len = data.length; i < len; i++) {\n            callback(data[i], i);\n        }\n    } else {\n        for (var _i in data) {\n            callback(data[_i], _i);\n        }\n    }\n};\n\n// 将目标转成字符\nfunction toString(value) {\n    if (typeof value !== 'string') {\n        if (value === undefined || value === null) {\n            value = '';\n        } else if (typeof value === 'function') {\n            value = toString(value.call(value));\n        } else {\n            value = JSON.stringify(value);\n        }\n    }\n\n    return value;\n};\n\n// 编码 HTML 内容\nfunction xmlEscape(content) {\n    var html = '' + content;\n    var regexResult = ESCAPE_REG.exec(html);\n    if (!regexResult) {\n        return content;\n    }\n\n    var result = '';\n    var i = void 0,\n        lastIndex = void 0,\n        char = void 0;\n    for (i = regexResult.index, lastIndex = 0; i < html.length; i++) {\n\n        switch (html.charCodeAt(i)) {\n            case 34:\n                char = '&#34;';\n                break;\n            case 38:\n                char = '&#38;';\n                break;\n            case 39:\n                char = '&#39;';\n                break;\n            case 60:\n                char = '&#60;';\n                break;\n            case 62:\n                char = '&#62;';\n                break;\n            default:\n                continue;\n        }\n\n        if (lastIndex !== i) {\n            result += html.substring(lastIndex, i);\n        }\n\n        lastIndex = i + 1;\n        result += char;\n    }\n\n    if (lastIndex !== i) {\n        return result + html.substring(lastIndex, i);\n    } else {\n        return result;\n    }\n};\n\nmodule.exports = runtime;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_art-template@4.12.2@art-template/lib/compile/runtime.js\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15","module.exports = false;\n\n// Only Node.JS has a process variable that is of [[Class]] process\ntry {\n module.exports = Object.prototype.toString.call(global.process) === '[object process]' \n} catch(e) {}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_detect-node@2.0.3@detect-node/index.js\n// module id = 3\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15"," const template = require('../template/live_center.art')\r\n\r\n $(document).ready(function() {\r\n\r\n\r\n     function loadmoreReInit($ele) {\r\n         $ele.destroyInfinite();\r\n         if ($ele.find('.weui-loadmore').length === 0) {\r\n             var loadmore_html = '<div class=\"weui-loadmore\"><i class=\"weui-loading\"></i><span class=\"weui-loadmore__tips\">正在加载</span></div>';\r\n             $ele.append(loadmore_html);\r\n         }\r\n         $ele.infinite();\r\n     }\r\n\r\n\r\n     var page = 1;\r\n     var size = 5;\r\n\r\n     //生成单个的tab上拉加载初始参数\r\n     function creatTabSetting($ele) {\r\n         var opt = {};\r\n         opt.itemsPerLoad = size;\r\n         opt.page = page;\r\n         opt.maxItems = 0;\r\n         opt.lastIndex = 0;\r\n         opt.loading = false;\r\n         opt.ele = $ele;\r\n         return opt;\r\n     }\r\n\r\n     var tab_setting = [];\r\n    //恢复缓存html，滚动高度，\r\n     var tabCache = $.getCache(\"live_center\", true);\r\n     //ios直接跳过\r\n     if (tabCache !== null&&device.ios!==true) {\r\n         $(\".weui-bar__item--on\").removeClass(\"weui-bar__item--on\");\r\n         $(\".weui-tab__bd-item--active\").removeClass('weui-tab__bd-item--active');\r\n         $(\".weui-navbar__item[href='\" + tabCache.activeTab + \"']\").addClass(\"weui-bar__item--on\");\r\n         $(tabCache.activeTab).addClass(\"weui-tab__bd-item--active\");\r\n         //each循环初始化\r\n         $(\".weui-tab__bd-item\").each(function(index, el) {\r\n             tab_setting[index] = tabCache.tabs[index];\r\n             //添加缓存html\r\n             $(el).find(\".cards-list>ul\").html(tabCache.tabs[index].tempHtml);\r\n             //滚动到历史高度\r\n             setTimeout(function() { $(el).scrollTop(tabCache.tabs[index].scrollTop); }, 100);\r\n         });\r\n         $(\".weui-tab__bd-item\").infinite().on(\"infinite\", function() {\r\n             var index = $(this).index();\r\n             var self = tabCache.tabs[index];\r\n             self.ele = $(this);\r\n             if (self.loading) return;\r\n             self.loading = true;\r\n             addItem(self);\r\n         });\r\n     } else {\r\n         //each循环初始化\r\n         $(\".weui-tab__bd-item\").each(function(index, el) {\r\n             tab_setting[index] = creatTabSetting($(this));\r\n             addItem(tab_setting[index]);\r\n         });\r\n         $(\".weui-tab__bd-item\").infinite().on(\"infinite\", function() {\r\n             var index = $(this).index();\r\n             var self = tab_setting[index];\r\n             if (self.loading) return;\r\n             self.loading = true;\r\n             addItem(self);\r\n         });\r\n     }\r\n\r\n     function addItem(opt, callback1, callback2) {\r\n         $._ajax({\r\n             url: domain + opt.ele.data(\"url\") + \"?page=\" + opt.page + \"&size=\" + opt.itemsPerLoad,\r\n             data: {\r\n                 type: opt.ele.data(\"type\")\r\n             },\r\n             success: function(data) {\r\n                 if (callback1 !== undefined) {\r\n                     callback1();\r\n                 }\r\n                 opt.ele.find('.cards-list>ul').append(template(data));\r\n                 console.log(data);\r\n                 if (callback2 !== undefined) {\r\n                     callback2();\r\n                 }\r\n                 opt.lastIndex = opt.ele.find('.cards-list>ul>li').length;\r\n                 opt.maxItems = data.total;\r\n                 if (opt.lastIndex >= opt.maxItems) {\r\n                     // 加载完毕，则注销无限加载事件，以防不必要的加载\r\n                     opt.ele.destroyInfinite();\r\n                     // 删除加载提示符\r\n                     opt.ele.find(\".weui-loadmore\").remove();\r\n                 }\r\n                 opt.page++;\r\n                 opt.loading = false;\r\n             }\r\n         });\r\n     }\r\n\r\n\r\n     $('.weui-tab__bd-item').pullToRefresh().on('pull-to-refresh', function(done) {\r\n         var self = this;\r\n         var i = $(self).index();\r\n         tab_setting[i] = creatTabSetting($(self));\r\n         addItem(tab_setting[i], function() {\r\n                 console.log(1);\r\n                 $(self).find(\".cards-list.content>ul\").html(\"\");\r\n             },\r\n             function() {\r\n                 loadmoreReInit($(self));\r\n                 $(self).pullToRefreshDone();\r\n             });\r\n     });\r\n\r\n\r\n     $(function() {\r\n         var $searchBar = $('#searchBar'),\r\n             $searchResult = $('#searchResult'),\r\n             $searchText = $('#searchText'),\r\n             $searchInput = $('#searchInput'),\r\n             $searchClear = $('#searchClear'),\r\n             $searchCancel = $('#searchCancel');\r\n\r\n         function hideSearchResult() {\r\n             $searchResult.hide();\r\n             $searchInput.val('');\r\n         }\r\n\r\n         function cancelSearch() {\r\n             hideSearchResult();\r\n             $searchBar.removeClass('weui-search-bar_focusing');\r\n             $searchText.show();\r\n         }\r\n\r\n         $searchText.on('click', function() {\r\n             $searchBar.addClass('weui-search-bar_focusing');\r\n             $searchInput.focus();\r\n         });\r\n         $searchInput.on('blur', function() {\r\n             if (!this.value.length) cancelSearch();\r\n         }).on('input', function() {\r\n             if (this.value.length) {\r\n                 $searchResult.show();\r\n             } else {\r\n                 $searchResult.hide();\r\n             }\r\n         });\r\n         $searchClear.on('click', function() {\r\n             hideSearchResult();\r\n             $searchInput.focus();\r\n         });\r\n         $searchCancel.on('click', function() {\r\n             cancelSearch();\r\n             $searchInput.blur();\r\n         });\r\n         $searchInput.on('keypress', function(event) {\r\n             if (event.keyCode == 13) {\r\n                 event.preventDefault();　　\r\n                 event.stopPropagation();\r\n                 window.location.href = \"search.html?keyword=\" + $searchInput.val();\r\n             }\r\n         });\r\n     });\r\n\r\n\r\n     //安卓记录tab状态，active和相应的高度\r\n     $(\"#page-live-center\").on(\"click\", \".card\", function() {\r\n        if(device.ios!==true){\r\n          var currTab = $(\".weui-bar__item--on\").attr(\"href\");\r\n         var tabs = tab_setting;\r\n         $(\".weui-tab__bd-item\").each(function(index, el) {\r\n             tabs[index].tempHtml = $(el).find(\".cards-list.content>ul\").html();\r\n             tabs[index].scrollTop = $(el).scrollTop();\r\n         });\r\n         $.setCache(\"live_center\", { activeTab: currTab, tabs: tabs }, true);  \r\n        }\r\n         window.location.href = $(this).children(\"a\").attr(\"data-href\");\r\n     });\r\n\r\n     if (performance.navigation.type === 1) {\r\n         $.setCache(\"live_center\", null, true);\r\n     }\r\n\r\n });\n\n\n// WEBPACK FOOTER //\n// app/js/live_center.js","{{each data list i}}\r\n<li class=\"card\" onclick=\"if(device.android)$.showLoading();\">\r\n    <a data-href=\"{{if list.file===undefined}}live{{else}}videos{{/if}}.html?id={{list.id}}\">\r\n    <span class=\"surface\" style=\"background-image: url({{list.main_img_url}})\"></span>\r\n    <div class=\"card-content\">\r\n        <h4 class=\"weui-media-box__title\">{{list.title}}{{if list.live_status!==undefined}}{{if list.live_status===1}}<span class=\"weui-badge\">进行中</span>{{else}}<span class=\"weui-badge over\">已过期</span>{{/if}} {{/if}}</h4>\r\n         <p class=\"weui-media-box__desc\">{{if list.summary!=\"\"}}{{list.summary}}{{else}}暂无简介{{/if}}</p>\r\n{{if list.file===undefined}}{{else}}\r\n\t<ul class=\"weui-media-box__info\">\r\n            <li class=\"weui-media-box__info__meta\"><i class=\"icon-play2\"></i>{{list.browse_num}}</li>\r\n        </ul> {{/if}}\r\n    </div>\r\n</a>\r\n</li>\r\n{{/each}}\n\n\n// WEBPACK FOOTER //\n// ./app/template/live_center.art"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACpBA;AACA;AACA;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClGA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AA0BA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;ACvLA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;AAAA;AAMA;AAAA;AAAA;AAAA;AANA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAPA;AAAA;;;;;;;A","sourceRoot":""}